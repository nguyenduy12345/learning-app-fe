import{r as o,u as A,U as T,j as e,L as l,i as j,a as E}from"./index-DXS-RssY.js";import{u as q}from"./index.esm-pbpisgTs.js";const Z=()=>{const[n,c]=o.useState(!1),[h,w]=o.useState(""),[d,u]=o.useState(!1),[p,f]=o.useState(!1),k=A(),{profile:x}=o.useContext(T);o.useEffect(()=>{x&&k("/learning")},[x]);const{register:m,handleSubmit:v,setFocus:b,formState:{errors:a,isSubmitting:y}}=q();o.useEffect(()=>{b("fullName")},[b]),o.useEffect(()=>{u(!1)},[h]);const C=async s=>{if(!s)return;if(h!==s.password){u("Xác nhận mật khẩu sai");return}const{fullName:P,email:g,password:N}=s;try{await j.post("register",{fullName:P,email:g,password:N}),await j.post("login",{email:g,password:N}).then(t=>{var r,i;E.set("token",(i=(r=t==null?void 0:t.data)==null?void 0:r.data)==null?void 0:i.accessToken,{expires:30}),t!=null&&t.data&&window.location.replace("/learning")})}catch(t){f(()=>{var r,i;return t.response.data&&Array.isArray(t.response.data)?t.response.data.map(S=>S.message).join(`
`):(i=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:i.message}),setTimeout(()=>f(""),2e3)}};return e.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gradient-to-r from-pink-400 to-blue-600",children:e.jsxs("div",{className:"flex h-auto w-[35rem] flex-col bg-white p-6",children:[e.jsxs("form",{onSubmit:v(C),children:[e.jsx("h4",{className:"mb-4 w-full text-center text-3xl font-bold font-noto",children:"Tạo tài khoản"}),e.jsx("input",{name:"fullName",...m("fullName",{required:"Nhập tên tài khoản của bạn",validate:s=>s.match(/^[A-Za-zÀ-ÿáàảãạăắằẳẵặâấầẩẫậèéẻẽẹêếềểễệìíỉĩịòóỏõọôốồổỗộơớờở̃ỡợùúủũụưứừửữựỳýỷỹỵđĐ0-9]+(?: [A-Za-zÀ-ÿáàảãạăắằẳẵặâấầẩẫậèéẻẽẹêếềểễệìíỉĩịòóỏõọôốồổỗộơớờở̃ỡợùúủũụưứừửữựỳýỷỹỵđĐ0-9]+)*$/)?!0:"Tên không được phép có dấu cách đầu tiên và mỗi từ phải cách nhau bằng một dấu cách.",maxLength:{value:50,message:"Trường tên quá dài, vui lòng nhập lại"}}),type:"text",placeholder:"Họ và tên",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),e.jsx("br",{}),a.fullName&&e.jsx("p",{className:"mb-2 text-red-500",children:a.fullName.message}),e.jsx("input",{...m("email",{required:"Nhập email của bạn",validate:s=>s.match(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/)?!0:"Vui lòng nhập đúng email của bạn"}),type:"text",placeholder:"Email",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),e.jsx("br",{}),a.email&&e.jsx("p",{className:"mb-2 text-red-500",children:a.email.message}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...m("password",{required:"Nhập mật khẩu của bạn",minLength:{value:6,message:"Mật khẩu phải nhiều hơn 6 ký tự"},validate:s=>s.match(/^[A-Za-z0-9!@#$%^&*(),.?":{}|<>_-]+$/)?!0:"Vui lòng nhập mật khẩu của bạn"}),type:n?"text":"password",placeholder:"Mật khẩu",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),n?e.jsx("i",{className:"fa-solid fa-eye-slash absolute right-3 top-3 cursor-pointer",onClick:()=>c(!n)}):e.jsx("i",{className:"fa-solid fa-eye absolute right-3 top-3 cursor-pointer",onClick:()=>c(!n)}),e.jsx("br",{}),a.password&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:a.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...m("rePassword",{required:"Xác nhận lại mật khẩu của bạn"}),onChange:s=>w(s.target.value),name:"rePassword",type:n?"text":"password",placeholder:"Xác nhận mật khẩu",className:"mb-[0.5rem] w-full border border-inherit p-2 pl-3 outline-none font-noto"}),n?e.jsx("i",{className:"fa-solid fa-eye-slash absolute right-3 top-3 cursor-pointer",onClick:()=>c(!n)}):e.jsx("i",{className:"fa-solid fa-eye absolute right-3 top-3 cursor-pointer",onClick:()=>c(!n)}),e.jsx("br",{}),a.rePassword&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:a.rePassword.message}),d&&e.jsx("p",{className:"mb-2 text-red-500 font-noto",children:d})]}),e.jsx("button",{className:"h-16 w-full bg-gradient-to-r from-pink-400 to-blue-600 p-2 text-2xl font-bold text-white hover:text-black font-noto",children:y?"Đang Gửi...":"Đăng Ký"}),p&&e.jsx("p",{className:"mb-2 p-1 text-center text-red-500 font-noto",children:p})]}),e.jsxs("p",{className:"mt-2 font-noto",children:["Bạn đã có tài khoản?"," ",e.jsx(l,{to:"/login",className:"text-[1.1rem] font-bold font-noto text-blue-700",children:"Đăng nhập"})]}),e.jsxs("p",{className:"mt-3 font-noto",children:["Khi đăng ký trên Duylingo, bạn đã đồng ý với"," ",e.jsx(l,{to:"",className:"font-medium font-noto",children:"Các chính sách"}),"và",e.jsx(l,{to:"",className:"font-medium font-noto",children:"Chính sách bảo mật"}),"của chúng tôi."]}),e.jsxs("p",{className:"mt-3 font-noto",children:["Trang này được bảo vệ bởi tập đoàn"," ",e.jsx("span",{className:"font-medium font-noto",children:"reCAPTCHA"})," và theo"," ",e.jsx(l,{to:"",className:"font-medium font-noto",children:"Chính sách bảo mật"}),"và"," ",e.jsx(l,{to:"",className:"font-medium font-noto",children:"Điều khoản dịch vụ của Google"}),"."]})]})})};export{Z as default};
